<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/docker-compose.yml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/docker-compose.yml" />
              <option name="originalContent" value="version: '3.8'&#10;&#10;services:&#10;  # PostgreSQL Database&#10;  postgres:&#10;    image: postgres:15-alpine&#10;    container_name: ledgerdb-postgres&#10;    environment:&#10;      POSTGRES_DB: ledgerdb&#10;      POSTGRES_USER: postgres&#10;      POSTGRES_PASSWORD: 0000&#10;    ports:&#10;      - &quot;5433:5432&quot;&#10;    volumes:&#10;      - postgres_data:/var/lib/postgresql/data&#10;    networks:&#10;      - banking-network&#10;    healthcheck:&#10;      test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -U postgres&quot;]&#10;      interval: 10s&#10;      timeout: 5s&#10;      retries: 5&#10;&#10;  # Zookeeper for Kafka&#10;  zookeeper:&#10;    image: confluentinc/cp-zookeeper:7.5.0&#10;    container_name: shadowledger-zookeeper&#10;    environment:&#10;      ZOOKEEPER_CLIENT_PORT: 2181&#10;      ZOOKEEPER_TICK_TIME: 2000&#10;    ports:&#10;      - &quot;2181:2181&quot;&#10;    networks:&#10;      - banking-network&#10;    healthcheck:&#10;      test: [&quot;CMD&quot;, &quot;nc&quot;, &quot;-z&quot;, &quot;localhost&quot;, &quot;2181&quot;]&#10;      interval: 10s&#10;      timeout: 5s&#10;      retries: 5&#10;&#10;  # Kafka Broker&#10;  kafka:&#10;    image: confluentinc/cp-kafka:7.5.0&#10;    container_name: shadowledger-kafka&#10;    depends_on:&#10;      zookeeper:&#10;        condition: service_healthy&#10;    environment:&#10;      KAFKA_BROKER_ID: 1&#10;      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181&#10;      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:9092,PLAINTEXT_HOST://localhost:29092&#10;      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT&#10;      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT&#10;      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1&#10;      KAFKA_AUTO_CREATE_TOPICS_ENABLE: 'true'&#10;      KAFKA_LOG_RETENTION_HOURS: 168&#10;      KAFKA_LOG_SEGMENT_BYTES: 1073741824&#10;    ports:&#10;      - &quot;29092:29092&quot;&#10;      - &quot;9092:9092&quot;&#10;    networks:&#10;      - banking-network&#10;    healthcheck:&#10;      test: [&quot;CMD&quot;, &quot;kafka-broker-api-versions&quot;, &quot;--bootstrap-server&quot;, &quot;localhost:9092&quot;]&#10;      interval: 10s&#10;      timeout: 10s&#10;      retries: 5&#10;&#10;  # Kafka Init - Create Topics&#10;  kafka-init:&#10;    image: confluentinc/cp-kafka:7.5.0&#10;    container_name: kafka-init&#10;    depends_on:&#10;      kafka:&#10;        condition: service_healthy&#10;    entrypoint: [ '/bin/sh', '-c' ]&#10;    command: |&#10;      &quot;&#10;      # Wait for Kafka to be ready&#10;      echo 'Waiting for Kafka to be ready...'&#10;      cub kafka-ready -b kafka:9092 1 30&#10;      &#10;      # Create topics&#10;      echo 'Creating Kafka topics...'&#10;      kafka-topics --create --if-not-exists --bootstrap-server kafka:9092 --partitions 3 --replication-factor 1 --topic transactions.raw&#10;      kafka-topics --create --if-not-exists --bootstrap-server kafka:9092 --partitions 3 --replication-factor 1 --topic transactions.corrections&#10;      &#10;      echo 'Topics created successfully:'&#10;      kafka-topics --list --bootstrap-server kafka:9092&#10;      &quot;&#10;    networks:&#10;      - banking-network&#10;&#10;  # Shadow Ledger Service&#10;  shadow-ledger-service:&#10;    build:&#10;      context: .&#10;      dockerfile: Dockerfile&#10;    container_name: shadow-ledger-service&#10;    depends_on:&#10;      postgres:&#10;        condition: service_healthy&#10;      kafka:&#10;        condition: service_healthy&#10;      kafka-init:&#10;        condition: service_completed_successfully&#10;    environment:&#10;      SPRING_PROFILES_ACTIVE: docker&#10;      DB_HOST: postgres&#10;      DB_PORT: 5432&#10;      DB_NAME: shadowledger&#10;      DB_USER: postgres&#10;      DB_PASSWORD: postgres&#10;      KAFKA_BOOTSTRAP_SERVERS: kafka:9092&#10;    ports:&#10;      - &quot;8082:8082&quot;&#10;    networks:&#10;      - banking-network&#10;    healthcheck:&#10;      test: [&quot;CMD&quot;, &quot;wget&quot;, &quot;--quiet&quot;, &quot;--tries=1&quot;, &quot;--spider&quot;, &quot;http://localhost:8082/actuator/health&quot;]&#10;      interval: 30s&#10;      timeout: 10s&#10;      retries: 5&#10;      start_period: 60s&#10;    restart: unless-stopped&#10;&#10;  # Kafka UI (Optional - for monitoring)&#10;  kafka-ui:&#10;    image: provectuslabs/kafka-ui:latest&#10;    container_name: kafka-ui&#10;    depends_on:&#10;      - kafka&#10;    environment:&#10;      KAFKA_CLUSTERS_0_NAME: local&#10;      KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS: kafka:9092&#10;      KAFKA_CLUSTERS_0_ZOOKEEPER: zookeeper:2181&#10;    ports:&#10;      - &quot;8080:8080&quot;&#10;    networks:&#10;      - banking-network&#10;&#10;volumes:&#10;  postgres_data:&#10;    driver: local&#10;&#10;networks:&#10;  banking-network:&#10;    driver: bridge&#10;&#10;" />
              <option name="updatedContent" value="services:&#10;  # PostgreSQL Database&#10;  postgres:&#10;    image: postgres:15-alpine&#10;    container_name: shadowledger-postgres&#10;    environment:&#10;      POSTGRES_DB: ledgerdb&#10;      POSTGRES_USER: postgres&#10;      POSTGRES_PASSWORD: &quot;0000&quot;&#10;    ports:&#10;      - &quot;5433:5432&quot;&#10;    volumes:&#10;      - postgres_data:/var/lib/postgresql/data&#10;    networks:&#10;      - banking-network&#10;    healthcheck:&#10;      test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -U postgres&quot;]&#10;      interval: 10s&#10;      timeout: 5s&#10;      retries: 5&#10;&#10;  # Zookeeper for Kafka&#10;  zookeeper:&#10;    image: confluentinc/cp-zookeeper:7.5.0&#10;    container_name: shadowledger-zookeeper&#10;    environment:&#10;      ZOOKEEPER_CLIENT_PORT: 2181&#10;      ZOOKEEPER_TICK_TIME: 2000&#10;    ports:&#10;      - &quot;2181:2181&quot;&#10;    networks:&#10;      - banking-network&#10;    healthcheck:&#10;      test: [&quot;CMD&quot;, &quot;nc&quot;, &quot;-z&quot;, &quot;localhost&quot;, &quot;2181&quot;]&#10;      interval: 10s&#10;      timeout: 5s&#10;      retries: 5&#10;&#10;  # Kafka Broker&#10;  kafka:&#10;    image: confluentinc/cp-kafka:7.5.0&#10;    container_name: shadowledger-kafka&#10;    depends_on:&#10;      zookeeper:&#10;        condition: service_healthy&#10;    environment:&#10;      KAFKA_BROKER_ID: 1&#10;      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181&#10;      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:9092,PLAINTEXT_HOST://localhost:29092&#10;      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT&#10;      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT&#10;      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1&#10;      KAFKA_AUTO_CREATE_TOPICS_ENABLE: 'true'&#10;      KAFKA_LOG_RETENTION_HOURS: 168&#10;      KAFKA_LOG_SEGMENT_BYTES: 1073741824&#10;    ports:&#10;      - &quot;29092:29092&quot;&#10;      - &quot;9092:9092&quot;&#10;    networks:&#10;      - banking-network&#10;    healthcheck:&#10;      test: [&quot;CMD&quot;, &quot;kafka-broker-api-versions&quot;, &quot;--bootstrap-server&quot;, &quot;localhost:9092&quot;]&#10;      interval: 10s&#10;      timeout: 10s&#10;      retries: 5&#10;&#10;  # Kafka Init - Create Topics&#10;  kafka-init:&#10;    image: confluentinc/cp-kafka:7.5.0&#10;    container_name: kafka-init&#10;    depends_on:&#10;      kafka:&#10;        condition: service_healthy&#10;    entrypoint: [ '/bin/sh', '-c' ]&#10;    command: |&#10;      &quot;&#10;      # Wait for Kafka to be ready&#10;      echo 'Waiting for Kafka to be ready...'&#10;      cub kafka-ready -b kafka:9092 1 30&#10;      &#10;      # Create topics&#10;      echo 'Creating Kafka topics...'&#10;      kafka-topics --create --if-not-exists --bootstrap-server kafka:9092 --partitions 3 --replication-factor 1 --topic transactions.raw&#10;      kafka-topics --create --if-not-exists --bootstrap-server kafka:9092 --partitions 3 --replication-factor 1 --topic transactions.corrections&#10;      &#10;      echo 'Topics created successfully:'&#10;      kafka-topics --list --bootstrap-server kafka:9092&#10;      &quot;&#10;    networks:&#10;      - banking-network&#10;&#10;  # Shadow Ledger Service&#10;  shadow-ledger-service:&#10;    build:&#10;      context: .&#10;      dockerfile: Dockerfile&#10;    container_name: shadow-ledger-service&#10;    depends_on:&#10;      postgres:&#10;        condition: service_healthy&#10;      kafka:&#10;        condition: service_healthy&#10;      kafka-init:&#10;        condition: service_completed_successfully&#10;    environment:&#10;      SPRING_DATASOURCE_URL: jdbc:postgresql://postgres:5432/ledgerdb&#10;      SPRING_DATASOURCE_USERNAME: postgres&#10;      SPRING_DATASOURCE_PASSWORD: &quot;0000&quot;&#10;      KAFKA_BOOTSTRAP_SERVERS: kafka:9092&#10;    ports:&#10;      - &quot;8082:8082&quot;&#10;    networks:&#10;      - banking-network&#10;    healthcheck:&#10;      test: [&quot;CMD&quot;, &quot;wget&quot;, &quot;--quiet&quot;, &quot;--tries=1&quot;, &quot;--spider&quot;, &quot;http://localhost:8082/actuator/health&quot;]&#10;      interval: 30s&#10;      timeout: 10s&#10;      retries: 5&#10;      start_period: 60s&#10;    restart: unless-stopped&#10;&#10;  # Kafka UI (Optional - for monitoring)&#10;  kafka-ui:&#10;    image: provectuslabs/kafka-ui:latest&#10;    container_name: kafka-ui&#10;    depends_on:&#10;      - kafka&#10;    environment:&#10;      KAFKA_CLUSTERS_0_NAME: local&#10;      KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS: kafka:9092&#10;      KAFKA_CLUSTERS_0_ZOOKEEPER: zookeeper:2181&#10;    ports:&#10;      - &quot;8080:8080&quot;&#10;    networks:&#10;      - banking-network&#10;&#10;volumes:&#10;  postgres_data:&#10;    driver: local&#10;&#10;networks:&#10;  banking-network:&#10;    driver: bridge&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/rebuild.sh">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/rebuild.sh" />
              <option name="updatedContent" value="#!/bin/bash&#10;&#10;echo &quot;======================================&quot;&#10;echo &quot;Rebuilding Shadow Ledger Service&quot;&#10;echo &quot;======================================&quot;&#10;&#10;# Stop the service&#10;echo -e &quot;\n1. Stopping shadow-ledger-service...&quot;&#10;docker-compose stop shadow-ledger-service&#10;&#10;# Rebuild the service&#10;echo -e &quot;\n2. Rebuilding shadow-ledger-service...&quot;&#10;docker-compose build shadow-ledger-service&#10;&#10;# Start the service&#10;echo -e &quot;\n3. Starting shadow-ledger-service...&quot;&#10;docker-compose up -d shadow-ledger-service&#10;&#10;# Wait for service to be ready&#10;echo -e &quot;\n4. Waiting for service to be ready...&quot;&#10;sleep 10&#10;&#10;# Check status&#10;echo -e &quot;\n5. Service Status:&quot;&#10;docker-compose ps shadow-ledger-service&#10;&#10;# Check health&#10;echo -e &quot;\n6. Health Check:&quot;&#10;curl -s http://localhost:8082/actuator/health | python3 -m json.tool&#10;&#10;echo -e &quot;\n======================================&quot;&#10;echo &quot;âœ… Rebuild Complete!&quot;&#10;echo &quot;======================================&quot;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/start.sh">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/start.sh" />
              <option name="updatedContent" value="#!/bin/bash&#10;&#10;# Colors for output&#10;GREEN='\033[0;32m'&#10;BLUE='\033[0;34m'&#10;RED='\033[0;31m'&#10;YELLOW='\033[1;33m'&#10;NC='\033[0m' # No Color&#10;&#10;echo -e &quot;${BLUE}=== Shadow Ledger Service - Docker Startup ===${NC}\n&quot;&#10;&#10;# Navigate to project directory&#10;cd /Users/TANISH.M/Downloads/ShadowLedgerService&#10;&#10;# Stop any existing containers&#10;echo -e &quot;${YELLOW}Stopping existing containers...${NC}&quot;&#10;docker-compose down&#10;&#10;# Build and start services&#10;echo -e &quot;${BLUE}Building and starting services...${NC}&quot;&#10;docker-compose up -d --build&#10;&#10;# Wait a moment&#10;sleep 5&#10;&#10;# Check status&#10;echo -e &quot;\n${BLUE}Service Status:${NC}&quot;&#10;docker-compose ps&#10;&#10;echo -e &quot;\n${GREEN}=== Services Starting ===${NC}&quot;&#10;echo -e &quot;Give it 30-60 seconds for all services to be healthy.&quot;&#10;echo -e &quot;\nTo check logs:&quot;&#10;echo -e &quot;  ${BLUE}docker-compose logs -f shadow-ledger-service${NC}&quot;&#10;echo -e &quot;\nTo check health:&quot;&#10;echo -e &quot;  ${BLUE}curl http://localhost:8082/actuator/health${NC}&quot;&#10;echo -e &quot;\n${GREEN}Service Endpoints:${NC}&quot;&#10;echo -e &quot;  Shadow Ledger API: http://localhost:8082&quot;&#10;echo -e &quot;  Kafka UI:          http://localhost:8080&quot;&#10;echo -e &quot;  PostgreSQL:        localhost:5433&quot;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>